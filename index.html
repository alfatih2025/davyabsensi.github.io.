<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Penjelasan Kode Absensi Arduino</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700&family=Montserrat:wght@300;400;600&display=swap');

    body {
        font-family: 'Montserrat', sans-serif;
        background: radial-gradient(circle at top, #0a0f1e, #05070d 70%);
        color: #e8ecf3;
        margin: 0;
        padding: 20px;
        overflow-x: hidden;
    }
    h1, h2, h3 {
        font-family: 'Orbitron', sans-serif;
        color: #6bdcff;
        text-shadow: 0 0 10px #00c6ff, 0 0 20px #0084ff;
    }
    .container {
        max-width: 950px;
        margin: auto;
        padding-bottom: 60px;
    }
    .code-block {
        background: rgba(18, 25, 38, 0.7);
        padding: 20px;
        border-radius: 14px;
        margin: 20px 0;
        border: 1px solid rgba(96, 199, 255, 0.3);
        backdrop-filter: blur(10px);
        box-shadow: 0 0 18px rgba(0, 153, 255, 0.25);
    }
    .explain {
        background: rgba(15, 20, 30, 0.7);
        padding: 16px;
        border-left: 4px solid #5ad2ff;
        margin-bottom: 30px;
        border-radius: 10px;
        backdrop-filter: blur(8px);
        box-shadow: 0 0 12px rgba(0, 153, 255, 0.25);
    }
    .nav {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        background: rgba(10, 15, 25, 0.8);
        padding: 12px;
        border-bottom: 1px solid rgba(96, 199, 255, 0.4);
        display: flex;
        justify-content: center;
        gap: 35px;
        z-index: 100;
        backdrop-filter: blur(10px);
    }
    .nav a {
        color: #74d7ff;
        text-decoration: none;
        font-family: 'Orbitron', sans-serif;
        font-weight: 600;
        letter-spacing: 1px;
        transition: 0.3s;
    }
    .nav a:hover {
        color: white;
        text-shadow: 0 0 10px #00d0ff;
    }

    .section {
        padding-top: 90px;
        animation: fadeUp 0.8s ease;
    }

    @keyframes fadeUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
</style>
</head>
<body>
<div class="nav">
    <a href="#library">Library</a>
    <a href="#pin">Pin Setup</a>
    <a href="#obj">Objek</a>
    <a href="#encoder">Encoder</a>
    <a href="#setup">Setup()</a>
    <a href="#loop">Loop()</a>
    <a href="#interrupt">Interrupt</a>
    <a href="#display">Display</a>
    <a href="#absen">Absensi</a>
</div>

<div class="container">

<h1>Situs Penjelasan Kode projek Absensi Davy</h1>
<p>Website ini menjelaskan seluruh kode program absensi </p>

<!-- SECTION 1 -->
<div id="library" class="section">
<h2>1. Library yang Digunakan</h2>
<div class="code-block">
<pre>#include Wire.h
#include Adafruit_GFX.h
#include Adafruit_SSD1306.h
#include RTClib.h </pre>
</div>
<div class="explain"><strong>Penjelasan:</strong><br>Bagian ini berisi alat-alat dasar yang wajib disiapkan Arduino. Ibarat membuka kotak perkakas lengkap, library ini memberikan fungsi siap pakai untuk: komunikasi I2C (Wire), tampilan OLED (Adafruit_GFX & SSD1306), dan pembacaan waktu nyata dari RTC (RTClib). Dengan library ini, kita tidak perlu membuat fungsi rumit sendiri—semua sudah disediakan sehingga pemrograman jadi jauh lebih mudah.</div>
</div>

<!-- SECTION 2 -->
<div id="pin" class="section">
<h2>2. Definisi Pin & Konfigurasi</h2>
<div class="code-block">
<pre>
#define SCREEN_WIDTH 128 → Ukuran layar OLED Lebar 128
#define SCREEN_HEIGHT 64  → Ukuran layar OLED Tinggi 64
#define OLED_RESET -1  → OLED tidak pakai pin reset (langsung ke VCC).
#define ENCODER_CLK_PIN 2 → CLK = sinyal utama (Pinn 2)r:
#define ENCODER_DT_PIN 3  → DT = sinyal arah(Pinn 3)
#define ENCODER_SW_PIN 4 → SW = tombol tekan (Pinn 4)
#define BUZZER_PIN 5 → Pin 5 buzzer.
</pre>
</div>
<div class="explain">
Bagian ini adalah peta wiring yang memberi Arduino 'label' untuk mengenali setiap perangkat yang terhubung. Dengan memberi nama pada pin, kita mempermudah proses debugging dan memastikan kode lebih mudah dibaca. Misalnya ENCODER_CLK_PIN akan selalu merujuk ke pin D2 sehingga kode lebih jelas dan terhindar dari salah sambung.. Kita memberi nama pada setiap pin supaya kode mudah dibaca.
</div>
</div>

<!-- SECTION 3 -->
<div id="obj" class="section">
<h2>3. Pembuatan Objek</h2>
<div class="code-block">
<pre>
Adafruit_SSD1306 display(...); = → Membuat “layar virtual” untuk OLED.
RTC_DS1307 rtc; → Objek untuk RTC DS1307.
</pre>
</div>
<div class="explain">
Objek ini ibarat dua otak mini yang bertugas khusus. Objek `display` mengatur seluruh proses menggambar teks, angka, dan grafik pada layar OLED. Sementara objek `rtc` berfungsi sebagai jam digital mandiri yang tetap berjalan walaupun Arduino mati. Dengan dua objek ini, program menjadi modular dan mudah digunakan. yang bertugas mengatur OLED dan membaca waktu dari RTC.
</div>
</div>

<!-- SECTION 4 -->
<div id="encoder" class="section">
<h2>4. Variabel Encoder & Daftar Karyawan</h2>
<div class="code-block">
<pre>
encderPos = 1; → Menyimpan angka ID yang dipilih dengan encoder. volatile biar aman dipakai interrupt.
String namaKaryawan[] = {"Davy", "Mas aldi", "Mas ilham"}; → Menyimpan nama-nama karyawan yang bisa dipilih via encoder.
</pre>
</div>
<div class="explain">
Variabel encoder menyimpan posisi putaran rotary encoder, yang digunakan sebagai pemilih ID. Karena rotary encoder bekerja dengan perubahan sinyal yang sangat cepat, variabel `encoderPos` dibuat sebagai `volatile`, artinya variabel ini aman diakses dari interrupt. Sementara array `namaKaryawan` berfungsi sebagai database sederhana untuk mencocokkan ID dengan nama. pilihan ID. Daftar nama adalah database kecil karyawan.
</div>
</div>

<!-- SECTION 5 -->
<div id="setup" class="section">
<h2>5. Fungsi setup()</h2>
<div class="code-block">
<pre>
void setup() {
  Serial.begin(9600); → Menyalakan komunikasi serial monitor.
 pinMode(ENCODER_CLK_PIN, INPUT_PULLUP);→ CLK pin encoder di-set input + resistor internal.
pinMode(ENCODER_DT_PIN, INPUT_PULLUP);→ DT pin encoder di-set input + resistor internal.
pinMode(ENCODER_SW_PIN, INPUT_PULLUP);→ SW pin encoder di-set input + resistor internal.
pinMode(BUZZER_PIN, OUTPUT); digitalWrite(BUZZER_PIN, LOW); → Menyalakan mode buzzer, tapi dibuat mati.
if (!rtc.begin()) {  → Cek apakah OLED terpasang. Jika tidak maka akan menampilkan → Serial.println("❌ RTC DS1307 tidak ditemukan!");
// while (true); // Hentikan program jika RTC gagal
 // --- Inisialisasi OLED ---
if(!display.begin(SSD1306_SWITCHCAPVCC, 0x3C)) { → Cek apakah OLED terpasang.dan Alamat OLED I2C 0x3C Jika tidak maka akan menampilkan → Serial.println(F("❌ Alokasi SSD1306 gagal"));
// while(true);  Jika berhasil maka akan menampilkan →
display.clearDisplay(); 
display.setTextSize(1);
display.setTextColor(SSD1306_WHITE);
// --- Attach Interrupt untuk Rotary Encoder → Menyalakan interrupt: jika encoder bergerak, fungsi updateEncoder() akan dipanggil otomatis.---
// Menggunakan interupsi eksternal pada pin D2 & D3 
attachInterrupt(digitalPinToInterrupt(ENCODER_CLK_PIN), updateEncoder, CHANGE);
attachInterrupt(digitalPinToInterrupt(ENCODER_DT_PIN), updateEncoder, CHANGE);
lastClkState = digitalRead(ENCODER_CLK_PIN); // Baca state awal
delay(100);
}
</pre>
</div>
<div class="explain">
Bagian setup adalah fase start-up ketika semua komponen dihidupkan. Arduino menyiapkan komunikasi serial, menetapkan mode setiap pin, mengaktifkan RTC, menghidupkan OLED, dan menghubungkan interrupt untuk mendeteksi putaran encoder. Setelah bagian ini selesai, seluruh perangkat siap bekerja secara real-time.. Semua perangkat dihidupkan dan dicek.
</div>
</div>

<!-- SECTION 6 -->
<div id="loop" class="section">
<h2>6. Fungsi loop()</h2>
<div class="code-block">
<pre>
void loop() → fungsi dimana program dijalankan secara berulang ulang {
  tampilkanLayarUtama(); → Menampilkan jam & nama ID yang lagi dipilih.
--- Cek Tombol Switch (SW) untuk Absen ---
if (digitalRead(ENCODER_SW_PIN) == LOW) {
delay(50); // Debounce
if (digitalRead(ENCODER_SW_PIN) == LOW) { 
  prosesAbsensi(); → Jalankan fungsi absen sesuai ID yang dipilih.
  // Tunggu sampai tombol dilepas  
  while (digitalRead(ENCODER_SW_PIN) == LOW);   
  delay(50);   
}
}
delay(100);
}
//Fungsi Interupsi untuk membaca pergerakan Rotary Encoder.
Ini harus cepat dan ringan.
}
</pre>
</div>
<div class="explain">
Loop adalah jantung program yang terus berjalan tanpa henti. Setiap putaran, Arduino memperbarui tampilan OLED agar waktu selalu akurat dan memeriksa apakah tombol encoder ditekan. Jika ditekan, maka fungsi absensi dipanggil. Dengan cara ini sistem selalu menunggu input pengguna. untuk menampilkan jam dan menunggu user menekan tombol encoder.
</div>
</div>

<!-- SECTION 7 -->
<div id="interrupt" class="section">
<h2>7. Interrupt Encoder</h2>
<div class="code-block">
<pre>
void updateEncoder() → Dipanggil otomatis saat encoder diputar.
  int newClkState = digitalRead(ENCODER_CLK_PIN); → Baca posisi sinyal encoder.
    int newDtState = digitalRead(ENCODER_DT_PIN); → Baca posisi sinyal encoder.

    if (newDtState != newClkState) encoderPos++; 
    else encoderPos--;
    → Deteksi arah putaran: beda = naik sama = turun

if (encoderPos < 1) encoderPos = JUMLAH_KARYAWAN;
if (encoderPos > JUMLAH_KARYAWAN) encoderPos = 1;
→ Kalau lewat batas, diputar keembali ke awal/akhir (seperti menu TV).

lastClkState = newClkState; → Menampilkan waktu dan menu pilihan ID di OLED.
</pre>
</div>
<div class="explain">
Interrupt adalah mekanisme khusus yang memungkinkan Arduino bereaksi terhadap event penting secara instan, tanpa menunggu loop selesai. Pada rotary encoder, gerakan putaran sangat cepat sehingga harus ditangani lewat interrupt agar tidak ada langkah yang terlewat. Fungsi ini membaca arah putaran dan memperbarui nilai ID secara presisi. "sensor ultra cepat" yang memantau pergerakan encoder.
</div>
</div>

<!-- SECTION 8 -->
<div id="display" class="section">
<h2>8. Fungsi Tampilan Layar</h2>
<div class="code-block">
<pre>
void tampilkanLayarUtama() → memanggil fungsi Tampilan Layar
{
  if (encoderPos != lastEncoderPos) {
    display.clearDisplay();
}
→ Jika ID berubah, layar dibersihkan dulu.
DateTime now = rtc.now(); → Baca waktu dari RTC.
// Baris 1: Tanggal → kumpulan baris dibawah ini untuk menulis atau menampilkan tanggal di baris 1.
display.setTextSize(1);
display.setCursor(0, 0);
display.print(now.day());
display.print("/");
display.print(now.month());
display.print("/");
display.print(now.year());

// Baris 2: Waktu kumpulan baris dibawah ini untuk menulis atau menampilkan waktu terkini di baris 2.
display.setTextSize(2); → Menampilkan ukuran teks
display.setCursor(0, 10); → Menampilkan posisi teks
if (now.hour() < 10) display.print('0'); → Tambahkan angka 0 di depan contoh=(jam 7 → “07”).
display.print(now.hour()); → Menampilkan angka untuk jam
display.print(":"); → Menampilkan '':'' untuk jam
if (now.minute() < 10) display.print('0'); → Tambahkan angka 0 di depan contoh=(menit 7 → “07”).
display.print(now.minute()); → Menampilkan angka untuk jam
display.print(":"); → Menampilkan '':'' untuk menit
if (now.second() < 10) display.print('0'); → Tambahkan angka 0 di depan contoh=(detik 7 → “07”).
display.print(now.second()); → Menampilkan angka untuk detik
</pre>
</div>
<div class="explain">
Layar OLED menampilkan tiga informasi utama: tanggal, jam real-time, dan menu pilihan ID. Tidak hanya menampilkan data mentah, fungsi ini juga memastikan tampilan selalu diperbarui saat encoder diputar. Ini membuat tampilan terasa dinamis seperti UI pada perangkat profesional. waktu dan pilihan ID sesuai posisi encoder.
</div>
</div>

<!-- SECTION 9 -->
<div id="absen" class="section">
<h2>9. Fungsi Absensi</h2>
<div class="code-block">
<pre>
void prosesAbsensi(int id) → memanggil fungsi untuk proses absen 
    DateTime now = rtc.now(); String nama = namaKaryawan[id - 1];  → untuk membacaa waktu absen & nama sesuai ID.
       tone(BUZZER_PIN, 1000, 100); → Buzzer bunyi "BIP"  100ms.
       → Kode display print dibawaah ini untuk menampilkan tulisan absen berhasil + nama jam + menit + waktu + tanggal.
display.print("ABSEN BERHASIL!");
display.print("Nama: ");
display.print(nama);
display.print("Waktu: ");
display.print(now.hour()); display.print(":");
display.print(now.minute()); display.print(":");
display.print(now.second());
display.setCursor(0, 40);
display.print("Tgl: ");
display.print(now.day()); display.print("/");
display.print(now.month()); display.print("/");
display.print(now.year());

→ kode serial print dibawah ini untuk Log absen dikirim ke komputer / arduino IDE atau Catat di Serial Monitor (Simulasi Log Absen) ---
Serial.print("ABSEN: ID ");
Serial.print(id);
Serial.print(" (");
Serial.print(nama);
Serial.print(") pada ");
Serial.print(now.timestamp(DateTime::TIMESTAMP_FULL));
Serial.println();
delay(3000); → Menahan tampilan selama 3 detik
display.display();
</pre>
</div>
<div class="explain">
Ini adalah inti proses absensi. Ketika ID dipilih, sistem mengambil nama dari database, menampilkan pesan sukses dengan waktu lengkap, membunyikan buzzer sebagai feedback, dan mencatat log ke Serial Monitor. Fungsi ini memastikan proses absensi terasa resmi, cepat, dan tercatat dengan rapi. yang mencatat absensi dan menampilkan hasil ke OLED.
</div>
</div>

</div>
</body>
</html>
